<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Lista de Fóruns - WZZM</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background-color: #f0f2f5;
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      padding: 30px;
    }

    h2 {
      text-align: center;
      color: #1a237e;
      margin-bottom: 30px;
    }

    .forum-item {
      border: 1px solid #ddd;
      border-left: 5px solid #4a69bd;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      background-color: #fafafa;
    }

    .forum-item h3 {
      margin: 0 0 8px;
      color: #2c3e50;
    }

    .forum-item p {
      margin: 4px 0;
      color: #555;
    }

    #status {
      text-align: center;
      margin-bottom: 20px;
      font-weight: bold;
      padding: 10px;
      border-radius: 8px;
    }

    #status.success {
      background-color: #e6f7e9;
      color: #2e7d32;
    }

    #status.error {
      background-color: #fce4e4;
      color: #c62828;
    }

    #status.warning {
      background-color: #fffbe6;
      color: #f9a825;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Fóruns Criados</h2>
    <div id="status">Carregando...</div>
    <div id="forumList"></div>
  </div>

  <script>
    // --- Configuração do Firebase ---
    const firebaseConfig = {
      apiKey: "AIzaSyB9GkSqTIZ0kbVsba_WOdQeVAETrF9qna0",
      authDomain: "wzzm-ce3fc.firebaseapp.com",
      projectId: "wzzm-ce3fc",
      storageBucket: "wzzm-ce3fc.appspot.com",
      messagingSenderId: "249427877153",
      appId: "1:249427877153:web:0e4297294794a5aadeb260",
      measurementId: "G-PLKNZNFCQ8"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();

    const statusElement = document.getElementById("status");
    const forumList = document.getElementById("forumList");

    auth.onAuthStateChanged(async user => {
      if (!user) {
        statusElement.textContent = "⚠️ Você precisa estar logado para visualizar os fóruns.";
        statusElement.className = "warning";
        return;
      }

      try {
        const snapshot = await db.collection("forumwzzm")
          .orderBy("createdAt", "desc")
          .get();

        if (snapshot.empty) {
          statusElement.textContent = "Nenhum fórum criado ainda.";
          statusElement.className = "warning";
          return;
        }

        statusElement.textContent = "Fóruns carregados com sucesso!";
        statusElement.className = "success";

        snapshot.forEach(doc => {
          const data = doc.data();
          const item = document.createElement("div");
          item.className = "forum-item";
          item.innerHTML = `
            <h3>${data.titulo || "Sem título"}</h3>
            <p><strong>Descrição:</strong> ${data.descricao || "Sem descrição"}</p>
            <p><strong>Tipo:</strong> ${data.tipoforum || "Não informado"}</p>
            <p><strong>UID Usuário:</strong> ${data.uidusuario || "Desconhecido"}</p>
            <p><strong>UID Fórum:</strong> ${doc.id}</p>
          `;
          forumList.appendChild(item);
        });
      } catch (error) {
        console.error("Erro ao carregar fóruns:", error);
        statusElement.textContent = "❌ Erro ao carregar os fóruns.";
        statusElement.className = "error";
      }
    });
  </script>
</body>
</html>
